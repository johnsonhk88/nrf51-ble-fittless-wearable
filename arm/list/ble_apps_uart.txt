; generated by Component: ARM Compiler 5.05 update 1 (build 106) Tool: ArmCC [4d0efa]
; commandline ArmCC [--c99 --list --debug -c --asm --interleave -o.\obj\ble_apps_uart.o --asm_dir=.\list\ --list_dir=.\list\ --depend=.\obj\ble_apps_uart.d --feedback=.\obj\ak2_v1_1_0.fed --cpu=Cortex-M0 --apcs=interwork -O3 --diag_suppress=9931 -I..\Include -I..\user -I..\Include\app_common -I..\Include\ble -I..\Include\ble\ble_services -I..\Include\s110 -I..\Include\boards -I..\Include\sd_common -IC:\Johnson_project\2016_Project\BLE_Pedometer\Fittless_wearable\firmware_design\git-project\arm\RTE -IC:\Keil_v5\ARM\PACK\NordicSemiconductor\nRF_DeviceFamilyPack\8.6.0\Device\Include -IC:\Keil_v5\ARM\CMSIS\Include -D__MICROLIB -D__UVISION_VERSION=514 -DNRF51 -DNRF51 -DDEBUG_NRF_USER -DSETUPA -DBOARD_AKII -DBLE_STACK_SUPPORT_REQD --omf_browse=.\obj\ble_apps_uart.crf ..\user\ble_apps_uart.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_percent
                          REQUIRE _printf_d
                          REQUIRE _printf_int_dec
                  BLE_Rx_Decode PROC
;;;471    
;;;472    void BLE_Rx_Decode(uint8_t * rx_buff, uint16_t rx_length)
000000  b5f8              PUSH     {r3-r7,lr}
;;;473    {	
;;;474      int i=0, j=0;
000002  2500              MOVS     r5,#0
000004  460f              MOV      r7,r1                 ;473
000006  4604              MOV      r4,r0                 ;473
;;;475    
;;;476    		/*Get the input character*/		
;;;477    		if(rx_length)
000008  2900              CMP      r1,#0
00000a  d075              BEQ      |L1.248|
;;;478    		 {
;;;479    			// nrf_delay_ms(500); 
;;;480    			for(i=0; i<rx_length; i++)
;;;481           {		
;;;482    	
;;;483      	 switch(rx_buff[i])
;;;484    				 {			 
;;;485    		case  's' :
;;;486    #if RTC_Func				
;;;487    			         if(rx_buff[i+1]=='c')
;;;488    		           {
;;;489    						     switch(rx_buff[i+2])
;;;490                     {
;;;491                     case 's':   // set second
;;;492    									          if((rx_buff[i+3]>='0')&&(rx_buff[i+3]<='9'))
;;;493    														{
;;;494                                  if((rx_buff[i+4]>='0')&&(rx_buff[i+4]<='9'))
;;;495    															{
;;;496    																if(rx_buff[i+5]=='e')
;;;497    																{
;;;498    																RTC_Con.Second_Reg=((rx_buff[i+3]-0x30)*10) + rx_buff[i+4]-0x30 ;
;;;499    																}	
;;;500    															}	
;;;501    														}															
;;;502                                 break;
;;;503    														
;;;504    								 case 'm':   // set mintue
;;;505    									          if((rx_buff[i+3]>='0')&&(rx_buff[i+3]<='9'))
;;;506    														{
;;;507                                  if((rx_buff[i+4]>='0')&&(rx_buff[i+4]<='9'))
;;;508    															{
;;;509    																if(rx_buff[i+5]=='e')
;;;510    																{
;;;511    																 RTC_Con.Min_Reg=((rx_buff[i+3]-0x30)*10) + rx_buff[i+4]-0x30 ;
;;;512    																}	
;;;513    															}	
;;;514    														}															
;;;515                                 break;		
;;;516    
;;;517                        case 'h':   // set mintue
;;;518    									          if((rx_buff[i+3]>='0')&&(rx_buff[i+3]<='9'))
;;;519    														{
;;;520                                  if((rx_buff[i+4]>='0')&&(rx_buff[i+4]<='9'))
;;;521    															{
;;;522    																if(rx_buff[i+5]=='e')
;;;523    																{
;;;524    																 RTC_Con.Hour_Reg=((rx_buff[i+3]-0x30)*10) + rx_buff[i+4]-0x30 ;
;;;525    																}	
;;;526    															}	
;;;527    														}															
;;;528                                 break;		
;;;529    
;;;530    
;;;531                       case 'd':   // set day
;;;532    									          if((rx_buff[i+3]>='0')&&(rx_buff[i+3]<='9'))
;;;533    														{
;;;534                                  if((rx_buff[i+4]>='0')&&(rx_buff[i+4]<='9'))
;;;535    															{
;;;536    																if(rx_buff[i+5]=='e')
;;;537    																{
;;;538    																 RTC_Con.Day_Reg=((rx_buff[i+3]-0x30)*10) + rx_buff[i+4]-0x30 ;
;;;539    																}	
;;;540    															}	
;;;541    														}															
;;;542                                 break;		
;;;543    
;;;544    
;;;545                       
;;;546                    case 'M':   // set Month
;;;547    									          if((rx_buff[i+3]>='0')&&(rx_buff[i+3]<='9'))
;;;548    														{
;;;549                                  if((rx_buff[i+4]>='0')&&(rx_buff[i+4]<='9'))
;;;550    															{
;;;551    																if(rx_buff[i+5]=='e')
;;;552    																{
;;;553    																 RTC_Con.Month_Reg=((rx_buff[i+3]-0x30)*10) + rx_buff[i+4]-0x30 ;
;;;554    																}	
;;;555    															}	
;;;556    														}															
;;;557                                 break;				
;;;558    
;;;559                    case 'Y':   // set year
;;;560    									          for(j=0; j<4; j++)
;;;561    								            {
;;;562    														if((rx_buff[i+3+j]<'0')&&(rx_buff[i+3+j]>'9'))
;;;563    														 {
;;;564    															break;
;;;565    														 }
;;;566    														 														 
;;;567    															
;;;568    														}	
;;;569    									          if(rx_buff[i+7]=='e')
;;;570    																{
;;;571    																 RTC_Con.Year_Reg=((rx_buff[i+3]-0x30)*1000) + ((rx_buff[i+4]-0x30)*100)+ 
;;;572    																	  ((rx_buff[i+5]-0x30)*10)+((rx_buff[i+6]-0x30));
;;;573    																}	
;;;574                             
;;;575    																												
;;;576                                 break;																
;;;577    
;;;578    
;;;579    								 }									 		 
;;;580    								 
;;;581    							 } 
;;;582    #endif  // end of RTC setting 
;;;583    
;;;584     #if OLED096_Func             
;;;585     if(rx_buff[i+1]=='o')
;;;586    		           {
;;;587    						     switch(rx_buff[i+2])
;;;588                     {
;;;589                     case 'i':   // increase OLED contrast
;;;590    									            if(rx_buff[i+3]!='e')
;;;591    															{
;;;592    																break;
;;;593    															}	
;;;594    									           if(OLED_Contrast<0xDF)
;;;595    														 {	 
;;;596    															OLED_Contrast+=0x20; 
;;;597    									           OLED_WR_Byte(0x81,OLED_CMD); //¶Ô±È¶ÈÉèÖÃ	
;;;598    														 OLED_WR_Byte(OLED_Contrast,OLED_CMD); 
;;;599    														 } 	
;;;600    														 else
;;;601    														 {
;;;602    														 OLED_Contrast =0xff; 
;;;603    									           OLED_WR_Byte(0x81,OLED_CMD); //¶Ô±È¶ÈÉèÖÃ	
;;;604    														 OLED_WR_Byte(OLED_Contrast,OLED_CMD);  
;;;605    															 
;;;606    														 } 
;;;607    															 
;;;608    															 
;;;609                                 break;
;;;610    														
;;;611    								 case 'd':   // decrease OLED contrast
;;;612    									             if(rx_buff[i+3]!='e')
;;;613    															{
;;;614    																break;
;;;615    															}	
;;;616    									         if(OLED_Contrast>=0x20)
;;;617    														 {	 
;;;618    															OLED_Contrast-=0x20; 
;;;619    									           OLED_WR_Byte(0x81,OLED_CMD); //¶Ô±È¶ÈÉèÖÃ	
;;;620    														 OLED_WR_Byte(OLED_Contrast,OLED_CMD); 
;;;621    														 } 
;;;622    														 else
;;;623    														 {
;;;624    														 OLED_Contrast =0x00; 
;;;625    									           OLED_WR_Byte(0x81,OLED_CMD); //¶Ô±È¶ÈÉèÖÃ	
;;;626    														 OLED_WR_Byte(OLED_Contrast,OLED_CMD); 
;;;627    
;;;628    														 }															 
;;;629                                 break;		
;;;630    
;;;631    								 }									 
;;;632    								 
;;;633    							 } 
;;;634    #endif			// 				 
;;;635    			          break; 
;;;636    								 
;;;637    		case   'o':		  if(rx_buff[i+1]=='n')
;;;638    		               {	
;;;639    											nrf_gpio_pin_set(LED4);
;;;640    		                 states[0]=rx_buff[0];               //¸üÐÂÒªÉÏ´«µÄ×´Ì¬Êý¾Ý
00000c  4efe              LDR      r6,|L1.1032|
00000e  e100              B        |L1.530|
                  |L1.16|
000010  5d60              LDRB     r0,[r4,r5]            ;483
000012  284f              CMP      r0,#0x4f              ;483
000014  d071              BEQ      |L1.250|
000016  286f              CMP      r0,#0x6f              ;483
000018  d070              BEQ      |L1.252|
00001a  2873              CMP      r0,#0x73              ;483
                  |L1.28|
00001c  d16f              BNE      |L1.254|
00001e  1960              ADDS     r0,r4,r5              ;487
000020  4684              MOV      r12,r0                ;487
000022  7840              LDRB     r0,[r0,#1]            ;487
000024  2863              CMP      r0,#0x63              ;487
000026  d124              BNE      |L1.114|
000028  4660              MOV      r0,r12                ;487
00002a  7880              LDRB     r0,[r0,#2]            ;489
00002c  2868              CMP      r0,#0x68              ;489
00002e  d037              BEQ      |L1.160|
000030  dc06              BGT      |L1.64|
000032  284d              CMP      r0,#0x4d              ;489
000034  d064              BEQ      |L1.256|
000036  2859              CMP      r0,#0x59              ;489
000038  d079              BEQ      |L1.302|
00003a  2864              CMP      r0,#0x64              ;489
00003c  d1ee              BNE      |L1.28|
00003e  e045              B        |L1.204|
                  |L1.64|
000040  286d              CMP      r0,#0x6d              ;489
000042  d017              BEQ      |L1.116|
000044  2873              CMP      r0,#0x73              ;489
000046  d1e9              BNE      |L1.28|
000048  4660              MOV      r0,r12                ;489
00004a  78c0              LDRB     r0,[r0,#3]            ;492
00004c  3830              SUBS     r0,r0,#0x30           ;492
00004e  2809              CMP      r0,#9                 ;492
                  |L1.80|
000050  d855              BHI      |L1.254|
000052  4661              MOV      r1,r12                ;492
000054  7909              LDRB     r1,[r1,#4]            ;494
000056  460a              MOV      r2,r1                 ;494
000058  3a30              SUBS     r2,r2,#0x30           ;494
00005a  2a09              CMP      r2,#9                 ;494
00005c  d8f8              BHI      |L1.80|
00005e  4662              MOV      r2,r12                ;494
000060  7952              LDRB     r2,[r2,#5]            ;496
000062  2a65              CMP      r2,#0x65              ;496
000064  d1da              BNE      |L1.28|
000066  220a              MOVS     r2,#0xa               ;498
000068  4350              MULS     r0,r2,r0              ;498
00006a  3830              SUBS     r0,r0,#0x30           ;498
00006c  1808              ADDS     r0,r1,r0              ;498
00006e  49e7              LDR      r1,|L1.1036|
000070  7048              STRB     r0,[r1,#1]            ;498
                  |L1.114|
000072  e07a              B        |L1.362|
                  |L1.116|
000074  4660              MOV      r0,r12                ;498
000076  78c0              LDRB     r0,[r0,#3]            ;505
000078  3830              SUBS     r0,r0,#0x30           ;505
00007a  2809              CMP      r0,#9                 ;505
00007c  d8e8              BHI      |L1.80|
00007e  4661              MOV      r1,r12                ;505
000080  7909              LDRB     r1,[r1,#4]            ;507
000082  460a              MOV      r2,r1                 ;507
000084  3a30              SUBS     r2,r2,#0x30           ;507
000086  2a09              CMP      r2,#9                 ;507
000088  d8e2              BHI      |L1.80|
00008a  4662              MOV      r2,r12                ;507
00008c  7952              LDRB     r2,[r2,#5]            ;509
00008e  2a65              CMP      r2,#0x65              ;509
000090  d1c4              BNE      |L1.28|
000092  220a              MOVS     r2,#0xa               ;511
000094  4350              MULS     r0,r2,r0              ;511
000096  3830              SUBS     r0,r0,#0x30           ;511
000098  1808              ADDS     r0,r1,r0              ;511
00009a  49dc              LDR      r1,|L1.1036|
00009c  7088              STRB     r0,[r1,#2]            ;511
00009e  e064              B        |L1.362|
                  |L1.160|
0000a0  4660              MOV      r0,r12                ;511
0000a2  78c0              LDRB     r0,[r0,#3]            ;518
0000a4  3830              SUBS     r0,r0,#0x30           ;518
0000a6  2809              CMP      r0,#9                 ;518
0000a8  d829              BHI      |L1.254|
0000aa  4661              MOV      r1,r12                ;518
0000ac  7909              LDRB     r1,[r1,#4]            ;520
0000ae  460a              MOV      r2,r1                 ;520
0000b0  3a30              SUBS     r2,r2,#0x30           ;520
0000b2  2a09              CMP      r2,#9                 ;520
0000b4  d823              BHI      |L1.254|
0000b6  4662              MOV      r2,r12                ;520
0000b8  7952              LDRB     r2,[r2,#5]            ;522
0000ba  2a65              CMP      r2,#0x65              ;522
0000bc  d11f              BNE      |L1.254|
0000be  220a              MOVS     r2,#0xa               ;524
0000c0  4350              MULS     r0,r2,r0              ;524
0000c2  3830              SUBS     r0,r0,#0x30           ;524
0000c4  1808              ADDS     r0,r1,r0              ;524
0000c6  49d1              LDR      r1,|L1.1036|
0000c8  70c8              STRB     r0,[r1,#3]            ;524
0000ca  e04e              B        |L1.362|
                  |L1.204|
0000cc  4660              MOV      r0,r12                ;524
0000ce  78c0              LDRB     r0,[r0,#3]            ;532
0000d0  3830              SUBS     r0,r0,#0x30           ;532
0000d2  2809              CMP      r0,#9                 ;532
0000d4  d813              BHI      |L1.254|
0000d6  4661              MOV      r1,r12                ;532
0000d8  790a              LDRB     r2,[r1,#4]            ;534
0000da  4611              MOV      r1,r2                 ;534
0000dc  3930              SUBS     r1,r1,#0x30           ;534
0000de  2909              CMP      r1,#9                 ;534
0000e0  d80d              BHI      |L1.254|
0000e2  4661              MOV      r1,r12                ;534
0000e4  7949              LDRB     r1,[r1,#5]            ;536
0000e6  2965              CMP      r1,#0x65              ;536
0000e8  d109              BNE      |L1.254|
0000ea  210a              MOVS     r1,#0xa               ;538
0000ec  4348              MULS     r0,r1,r0              ;538
0000ee  3830              SUBS     r0,r0,#0x30           ;538
0000f0  1811              ADDS     r1,r2,r0              ;538
0000f2  48c6              LDR      r0,|L1.1036|
0000f4  7101              STRB     r1,[r0,#4]            ;538
0000f6  e038              B        |L1.362|
                  |L1.248|
0000f8  e08e              B        |L1.536|
                  |L1.250|
0000fa  e08e              B        |L1.538|
                  |L1.252|
0000fc  e068              B        |L1.464|
                  |L1.254|
0000fe  e055              B        |L1.428|
                  |L1.256|
000100  4660              MOV      r0,r12                ;538
000102  78c0              LDRB     r0,[r0,#3]            ;547
000104  3830              SUBS     r0,r0,#0x30           ;547
000106  2809              CMP      r0,#9                 ;547
000108  d850              BHI      |L1.428|
00010a  4661              MOV      r1,r12                ;547
00010c  7909              LDRB     r1,[r1,#4]            ;549
00010e  460a              MOV      r2,r1                 ;549
000110  3a30              SUBS     r2,r2,#0x30           ;549
000112  2a09              CMP      r2,#9                 ;549
000114  d87c              BHI      |L1.528|
000116  4662              MOV      r2,r12                ;549
000118  7952              LDRB     r2,[r2,#5]            ;551
00011a  2a65              CMP      r2,#0x65              ;551
00011c  d178              BNE      |L1.528|
00011e  220a              MOVS     r2,#0xa               ;553
000120  4350              MULS     r0,r2,r0              ;553
000122  3830              SUBS     r0,r0,#0x30           ;553
000124  1809              ADDS     r1,r1,r0              ;553
000126  48b9              LDR      r0,|L1.1036|
000128  7141              STRB     r1,[r0,#5]            ;553
00012a  e01e              B        |L1.362|
00012c  e7ff              B        |L1.302|
                  |L1.302|
00012e  2000              MOVS     r0,#0                 ;560
                  |L1.304|
000130  1c40              ADDS     r0,r0,#1              ;560
000132  2804              CMP      r0,#4                 ;560
000134  dbfc              BLT      |L1.304|
000136  4660              MOV      r0,r12                ;562
000138  79c0              LDRB     r0,[r0,#7]            ;569
00013a  2865              CMP      r0,#0x65              ;569
00013c  d115              BNE      |L1.362|
00013e  4660              MOV      r0,r12                ;569
000140  7981              LDRB     r1,[r0,#6]            ;571
000142  78c0              LDRB     r0,[r0,#3]            ;571
000144  227d              MOVS     r2,#0x7d              ;571
000146  00d2              LSLS     r2,r2,#3              ;571
000148  3830              SUBS     r0,r0,#0x30           ;571
00014a  4350              MULS     r0,r2,r0              ;571
00014c  180a              ADDS     r2,r1,r0              ;571
00014e  4660              MOV      r0,r12                ;571
000150  7900              LDRB     r0,[r0,#4]            ;571
000152  2164              MOVS     r1,#0x64              ;571
000154  4348              MULS     r0,r1,r0              ;571
000156  4661              MOV      r1,r12                ;571
000158  7949              LDRB     r1,[r1,#5]            ;571
00015a  230a              MOVS     r3,#0xa               ;571
00015c  4359              MULS     r1,r3,r1              ;571
00015e  1840              ADDS     r0,r0,r1              ;571
000160  49ab              LDR      r1,|L1.1040|
000162  1810              ADDS     r0,r2,r0              ;571
000164  1840              ADDS     r0,r0,r1              ;571
000166  49a9              LDR      r1,|L1.1036|
000168  80c8              STRH     r0,[r1,#6]            ;571
                  |L1.362|
00016a  4660              MOV      r0,r12                ;571
00016c  7840              LDRB     r0,[r0,#1]            ;585
00016e  286f              CMP      r0,#0x6f              ;585
000170  d14e              BNE      |L1.528|
000172  4660              MOV      r0,r12                ;585
000174  7880              LDRB     r0,[r0,#2]            ;587
000176  2864              CMP      r0,#0x64              ;587
000178  d019              BEQ      |L1.430|
00017a  2869              CMP      r0,#0x69              ;587
00017c  d148              BNE      |L1.528|
00017e  4660              MOV      r0,r12                ;587
000180  78c0              LDRB     r0,[r0,#3]            ;590
000182  2865              CMP      r0,#0x65              ;590
000184  d144              BNE      |L1.528|
000186  48a3              LDR      r0,|L1.1044|
000188  7801              LDRB     r1,[r0,#0]            ;594  ; OLED_Contrast
00018a  29df              CMP      r1,#0xdf              ;594
00018c  d203              BCS      |L1.406|
00018e  7800              LDRB     r0,[r0,#0]            ;596  ; OLED_Contrast
000190  49a0              LDR      r1,|L1.1044|
000192  3020              ADDS     r0,r0,#0x20           ;596
000194  e016              B        |L1.452|
                  |L1.406|
000196  21ff              MOVS     r1,#0xff              ;602
000198  e017              B        |L1.458|
                  |L1.410|
00019a  2100              MOVS     r1,#0                 ;603
00019c  2081              MOVS     r0,#0x81              ;603
00019e  f7fffffe          BL       OLED_WR_Byte
0001a2  489c              LDR      r0,|L1.1044|
0001a4  2100              MOVS     r1,#0                 ;604
0001a6  7800              LDRB     r0,[r0,#0]            ;604  ; OLED_Contrast
0001a8  f7fffffe          BL       OLED_WR_Byte
                  |L1.428|
0001ac  e030              B        |L1.528|
                  |L1.430|
0001ae  4660              MOV      r0,r12                ;604
0001b0  78c0              LDRB     r0,[r0,#3]            ;612
0001b2  2865              CMP      r0,#0x65              ;612
0001b4  d12c              BNE      |L1.528|
0001b6  4897              LDR      r0,|L1.1044|
0001b8  7801              LDRB     r1,[r0,#0]            ;616  ; OLED_Contrast
0001ba  2920              CMP      r1,#0x20              ;616
0001bc  d304              BCC      |L1.456|
0001be  7800              LDRB     r0,[r0,#0]            ;618  ; OLED_Contrast
0001c0  4994              LDR      r1,|L1.1044|
0001c2  3820              SUBS     r0,r0,#0x20           ;618
                  |L1.452|
0001c4  7008              STRB     r0,[r1,#0]            ;618
0001c6  e7e8              B        |L1.410|
                  |L1.456|
0001c8  2100              MOVS     r1,#0                 ;624
                  |L1.458|
0001ca  4892              LDR      r0,|L1.1044|
0001cc  7001              STRB     r1,[r0,#0]            ;624
0001ce  e7e4              B        |L1.410|
                  |L1.464|
0001d0  1960              ADDS     r0,r4,r5              ;637
0001d2  7841              LDRB     r1,[r0,#1]            ;637
0001d4  296e              CMP      r1,#0x6e              ;637
0001d6  d002              BEQ      |L1.478|
;;;641    		                 states[1]=rx_buff[1];
;;;642    		                 states[2]=0;
;;;643    		                 change_state=1;                  //
;;;644    									 }
;;;645    									 else if(rx_buff[i+1]=='f')
0001d8  2966              CMP      r1,#0x66
0001da  d009              BEQ      |L1.496|
0001dc  e018              B        |L1.528|
                  |L1.478|
0001de  2016              MOVS     r0,#0x16              ;639
0001e0  f7fffffe          BL       nrf_gpio_pin_set
0001e4  7820              LDRB     r0,[r4,#0]            ;640
0001e6  7030              STRB     r0,[r6,#0]            ;640
0001e8  7860              LDRB     r0,[r4,#1]            ;641
0001ea  7070              STRB     r0,[r6,#1]            ;641
0001ec  2000              MOVS     r0,#0                 ;642
0001ee  e00a              B        |L1.518|
                  |L1.496|
;;;646    									 {
;;;647                         if(rx_buff[i+2]=='f')
0001f0  7880              LDRB     r0,[r0,#2]
0001f2  2866              CMP      r0,#0x66
0001f4  d10c              BNE      |L1.528|
                  |L1.502|
;;;648    										 {
;;;649    											  nrf_gpio_pin_clear(LED4);	
0001f6  2016              MOVS     r0,#0x16
0001f8  f7fffffe          BL       nrf_gpio_pin_clear
;;;650    		                 states[0]=rx_buff[0];               //¸üÐÂÒªÉÏ´«µÄ×´Ì¬Êý¾Ý
0001fc  7820              LDRB     r0,[r4,#0]
0001fe  7030              STRB     r0,[r6,#0]
;;;651    		                 states[1]=rx_buff[1];
000200  7860              LDRB     r0,[r4,#1]
000202  7070              STRB     r0,[r6,#1]
;;;652    		                 states[2]=rx_buff[2];
000204  78a0              LDRB     r0,[r4,#2]
                  |L1.518|
;;;653    		                 change_state=1;                  
;;;654    										 } 
;;;655                         
;;;656    									 }			
;;;657                      else
;;;658    								  {
;;;659                        
;;;660    							   	}									
;;;661    									           
;;;662                     break;
;;;663    
;;;664        case   'O':     if(rx_buff[i+1]=='N')
;;;665    		               {	
;;;666    											nrf_gpio_pin_set(LED4);
;;;667    		                 states[0]=rx_buff[0];               //¸üÐÂÒªÉÏ´«µÄ×´Ì¬Êý¾Ý
;;;668    		                 states[1]=rx_buff[1];
;;;669    		                 states[2]=0;
;;;670    		                 change_state=1;                  //
;;;671    									 }
;;;672    									 else if(rx_buff[i+1]=='F')
;;;673    									 {
;;;674                         if(rx_buff[i+2]=='F')
;;;675    										 {
;;;676    											  nrf_gpio_pin_clear(LED4);	
;;;677    		                 states[0]=rx_buff[0];               //¸üÐÂÒªÉÏ´«µÄ×´Ì¬Êý¾Ý
;;;678    		                 states[1]=rx_buff[1];
;;;679    		                 states[2]=rx_buff[2];
000206  70b0              STRB     r0,[r6,#2]
;;;680    		                 change_state=1;                  
000208  497f              LDR      r1,|L1.1032|
00020a  2001              MOVS     r0,#1
00020c  1f09              SUBS     r1,r1,#4
00020e  7008              STRB     r0,[r1,#0]
                  |L1.528|
000210  1c6d              ADDS     r5,r5,#1
                  |L1.530|
000212  42bd              CMP      r5,r7                 ;480
000214  da00              BGE      |L1.536|
000216  e6fb              B        |L1.16|
                  |L1.536|
;;;681    										 } 
;;;682                         
;;;683    									 }			
;;;684                      else
;;;685    								  {
;;;686                        
;;;687    							   	}							
;;;688    			
;;;689                     break;			
;;;690    								 
;;;691    						
;;;692    	       }
;;;693    			 } 
;;;694          rx_length=0;
;;;695    		 }			 
;;;696    
;;;697    
;;;698    }
000218  bdf8              POP      {r3-r7,pc}
                  |L1.538|
00021a  1961              ADDS     r1,r4,r5              ;664
00021c  7848              LDRB     r0,[r1,#1]            ;664
00021e  284e              CMP      r0,#0x4e              ;664
000220  d0dd              BEQ      |L1.478|
000222  2846              CMP      r0,#0x46              ;672
000224  d1f4              BNE      |L1.528|
000226  7888              LDRB     r0,[r1,#2]            ;674
000228  2846              CMP      r0,#0x46              ;674
00022a  d0e4              BEQ      |L1.502|
00022c  e7f0              B        |L1.528|
;;;699    
                          ENDP

                  nus_data_handler PROC
;;;160    
;;;161    void nus_data_handler(ble_nus_t * p_nus, uint8_t * p_data, uint16_t length)
00022e  b570              PUSH     {r4-r6,lr}
;;;162    {
000230  460c              MOV      r4,r1
000232  4615              MOV      r5,r2
;;;163    	  printf("BLE Rx Length: %d",length);
000234  4611              MOV      r1,r2
000236  a078              ADR      r0,|L1.1048|
000238  f7fffffe          BL       __2printf
;;;164    	
;;;165    	  BLE_Rx_Decode(p_data, length);
00023c  4629              MOV      r1,r5
00023e  4620              MOV      r0,r4
000240  f7fffffe          BL       BLE_Rx_Decode
;;;166    /*	
;;;167    	  if(((p_data[0]=='O')||(p_data[0]=='o'))&&((p_data[1]=='N')||(p_data[1]=='n')))  //????????“ON”??"on"
;;;168    		{
;;;169    		 //nrf_gpio_pin_clear(LED_GREEN );    //???????
;;;170    		// nrf_gpio_pin_set(LED_RED );        //???????
;;;171    		 //nrf_gpio_pin_clear(RELAY);         //?????
;;;172    			nrf_gpio_pin_set(LED4);
;;;173    		 states[0]=p_data[0];               //¸üÐÂÒªÉÏ´«µÄ×´Ì¬Êý¾Ý
;;;174    		 states[1]=p_data[1];
;;;175    		 states[2]=0;
;;;176    		 change_state=1;                  //??????,????????
;;;177    		}
;;;178    		
;;;179    		 if(((p_data[0]=='O')||(p_data[0]=='o'))&&((p_data[1]=='F')||(p_data[1]=='f'))&&((p_data[2]=='F')||(p_data[2]=='f')))
;;;180    		{
;;;181    		 //????????“OFF”??"off"
;;;182    		// nrf_gpio_pin_clear(LED_RED);     //???????
;;;183    		 //nrf_gpio_pin_set(LED_GREEN );    //???????
;;;184    		 //nrf_gpio_pin_set(RELAY);         //?????
;;;185    		 nrf_gpio_pin_clear(LED4);	
;;;186    		 states[0]=p_data[0];             //??????????
;;;187    		 states[1]=p_data[1];
;;;188    		 states[2]=p_data[2];
;;;189    		 change_state=1;                  //??????,????????
;;;190    		}
;;;191    */		
;;;192    	}
000244  bd70              POP      {r4-r6,pc}
;;;193    /**@snippet [Handling the data received over BLE] */
                          ENDP

                  on_conn_params_evt PROC
;;;239     */
;;;240    static void on_conn_params_evt(ble_conn_params_evt_t * p_evt)
000246  b510              PUSH     {r4,lr}
;;;241    {
;;;242        uint32_t err_code;
;;;243        if(p_evt->evt_type == BLE_CONN_PARAMS_EVT_FAILED)
000248  7800              LDRB     r0,[r0,#0]
00024a  2800              CMP      r0,#0
00024c  d10a              BNE      |L1.612|
;;;244        {
;;;245            err_code = sd_ble_gap_disconnect(m_conn_handle, BLE_HCI_CONN_INTERVAL_UNACCEPTABLE);
00024e  486e              LDR      r0,|L1.1032|
000250  213b              MOVS     r1,#0x3b
000252  1f00              SUBS     r0,r0,#4
000254  8840              LDRH     r0,[r0,#2]  ; m_conn_handle
000256  df76              SVC      #0x76
;;;246            APP_ERROR_CHECK(err_code);
000258  2800              CMP      r0,#0
00025a  d003              BEQ      |L1.612|
00025c  a273              ADR      r2,|L1.1068|
00025e  21f6              MOVS     r1,#0xf6
000260  f7fffffe          BL       app_error_handler
                  |L1.612|
;;;247        }
;;;248    }
000264  bd10              POP      {r4,pc}
;;;249    
                          ENDP

                  conn_params_error_handler PROC
;;;254     */
;;;255    static void conn_params_error_handler(uint32_t nrf_error)
000266  b510              PUSH     {r4,lr}
;;;256    {
;;;257        APP_ERROR_HANDLER(nrf_error);
000268  21ff              MOVS     r1,#0xff
00026a  a270              ADR      r2,|L1.1068|
00026c  3102              ADDS     r1,#2
00026e  f7fffffe          BL       app_error_handler
;;;258    }
000272  bd10              POP      {r4,pc}
;;;259    
                          ENDP

                  advertising_start PROC
;;;287    //¿ªÊ¼¹ã²¥
;;;288    static void advertising_start(void)
000274  b500              PUSH     {lr}
;;;289    {
000276  b085              SUB      sp,sp,#0x14
;;;290        uint32_t             err_code;
;;;291        ble_gap_adv_params_t adv_params;
;;;292        
;;;293        // Start advertising
;;;294        memset(&adv_params, 0, sizeof(adv_params));           //?????
000278  2114              MOVS     r1,#0x14
00027a  4668              MOV      r0,sp
00027c  f7fffffe          BL       __aeabi_memclr4
;;;295        
;;;296        adv_params.type        = BLE_GAP_ADV_TYPE_ADV_IND;
000280  2000              MOVS     r0,#0
000282  4669              MOV      r1,sp
000284  7008              STRB     r0,[r1,#0]
;;;297        adv_params.p_peer_addr = NULL;
;;;298        adv_params.fp          = BLE_GAP_ADV_FP_ANY;
000286  9001              STR      r0,[sp,#4]
000288  7208              STRB     r0,[r1,#8]
;;;299        adv_params.interval    = APP_ADV_INTERVAL;            //????
00028a  2040              MOVS     r0,#0x40
00028c  8208              STRH     r0,[r1,#0x10]
;;;300        adv_params.timeout     = APP_ADV_TIMEOUT_IN_SECONDS;  //?????
00028e  20b4              MOVS     r0,#0xb4
000290  8248              STRH     r0,[r1,#0x12]
;;;301    
;;;302        err_code = sd_ble_gap_adv_start(&adv_params);         //????????
000292  4668              MOV      r0,sp
000294  df73              SVC      #0x73
;;;303        APP_ERROR_CHECK(err_code);                            //????ERROR??
000296  2800              CMP      r0,#0
000298  d004              BEQ      |L1.676|
00029a  21ff              MOVS     r1,#0xff
00029c  a263              ADR      r2,|L1.1068|
00029e  3130              ADDS     r1,r1,#0x30
0002a0  f7fffffe          BL       app_error_handler
                  |L1.676|
;;;304    
;;;305        nrf_gpio_pin_set(ADVERTISING_LED_PIN_NO);             //????????
0002a4  2012              MOVS     r0,#0x12
0002a6  f7fffffe          BL       nrf_gpio_pin_set
;;;306    }
0002aa  b005              ADD      sp,sp,#0x14
0002ac  bd00              POP      {pc}
;;;307    
                          ENDP

                  on_ble_evt PROC
;;;313    //Ã¿´ÎÁ¬½ÓÊÂ¼þ²úÉúµÄ´¦Àíº¯Êý
;;;314    static void on_ble_evt(ble_evt_t * p_ble_evt)
0002ae  b570              PUSH     {r4-r6,lr}
;;;315    {
0002b0  4604              MOV      r4,r0
;;;316        uint32_t                         err_code;
;;;317        static ble_gap_evt_auth_status_t m_auth_status;
;;;318        ble_gap_enc_info_t *             p_enc_info;
;;;319        
;;;320        switch (p_ble_evt->header.evt_id)
;;;321        {
;;;322            case BLE_GAP_EVT_CONNECTED:                             //?????
;;;323                nrf_gpio_pin_set(CONNECTED_LED_PIN_NO);             //???????
;;;324                nrf_gpio_pin_clear(ADVERTISING_LED_PIN_NO);         //??????
;;;325                m_conn_handle = p_ble_evt->evt.gap_evt.conn_handle;
0002b2  4d55              LDR      r5,|L1.1032|
0002b4  8800              LDRH     r0,[r0,#0]            ;320
0002b6  1f2d              SUBS     r5,r5,#4
0002b8  2814              CMP      r0,#0x14              ;320
0002ba  d043              BEQ      |L1.836|
0002bc  dc10              BGT      |L1.736|
0002be  2810              CMP      r0,#0x10              ;320
0002c0  d020              BEQ      |L1.772|
0002c2  2811              CMP      r0,#0x11              ;320
0002c4  d028              BEQ      |L1.792|
0002c6  2813              CMP      r0,#0x13              ;320
0002c8  d11b              BNE      |L1.770|
;;;326    				    	#if OLED096_Func 
;;;327    						OLED_ShowString(0,16, (uint8_t*)"BT:CON");
;;;328    	           OLED_Refresh_Gram();
;;;329    						#endif
;;;330                break;
;;;331                
;;;332            case BLE_GAP_EVT_DISCONNECTED:
;;;333                nrf_gpio_pin_clear(CONNECTED_LED_PIN_NO);
;;;334                m_conn_handle = BLE_CONN_HANDLE_INVALID;
;;;335    
;;;336                advertising_start();
;;;337    				    #if OLED096_Func 
;;;338    						OLED_ShowString(0,16, (uint8_t*)"BT:DIS");
;;;339    	           OLED_Refresh_Gram();
;;;340    						#endif
;;;341    
;;;342                break;
;;;343                
;;;344            case BLE_GAP_EVT_SEC_PARAMS_REQUEST:
;;;345                err_code = sd_ble_gap_sec_params_reply(m_conn_handle, 
0002ca  462a              MOV      r2,r5
0002cc  3208              ADDS     r2,r2,#8
0002ce  2100              MOVS     r1,#0
0002d0  8868              LDRH     r0,[r5,#2]  ; m_conn_handle
0002d2  df7f              SVC      #0x7f
;;;346                                                       BLE_GAP_SEC_STATUS_SUCCESS, 
;;;347                                                       &m_sec_params);
;;;348                APP_ERROR_CHECK(err_code);
0002d4  2800              CMP      r0,#0
0002d6  d014              BEQ      |L1.770|
0002d8  21ff              MOVS     r1,#0xff
0002da  a254              ADR      r2,|L1.1068|
0002dc  315d              ADDS     r1,r1,#0x5d
0002de  e00e              B        |L1.766|
                  |L1.736|
0002e0  2817              CMP      r0,#0x17              ;320
0002e2  d029              BEQ      |L1.824|
0002e4  2819              CMP      r0,#0x19              ;320
0002e6  d046              BEQ      |L1.886|
0002e8  2852              CMP      r0,#0x52              ;320
0002ea  d10a              BNE      |L1.770|
;;;349                break;
;;;350                
;;;351            case BLE_GATTS_EVT_SYS_ATTR_MISSING:
;;;352                err_code = sd_ble_gatts_sys_attr_set(m_conn_handle, NULL, 0);
0002ec  2200              MOVS     r2,#0
0002ee  4611              MOV      r1,r2
0002f0  8868              LDRH     r0,[r5,#2]  ; m_conn_handle
0002f2  dfa9              SVC      #0xa9
;;;353                APP_ERROR_CHECK(err_code);
0002f4  2800              CMP      r0,#0
0002f6  d004              BEQ      |L1.770|
0002f8  21ff              MOVS     r1,#0xff
0002fa  a24c              ADR      r2,|L1.1068|
0002fc  3162              ADDS     r1,r1,#0x62
                  |L1.766|
0002fe  f7fffffe          BL       app_error_handler
                  |L1.770|
;;;354                break;
;;;355    
;;;356            case BLE_GAP_EVT_AUTH_STATUS:
;;;357                m_auth_status = p_ble_evt->evt.gap_evt.params.auth_status;
;;;358                break;
;;;359                
;;;360            case BLE_GAP_EVT_SEC_INFO_REQUEST:
;;;361                p_enc_info = &m_auth_status.periph_keys.enc_info;
;;;362                if (p_enc_info->div == p_ble_evt->evt.gap_evt.params.sec_info_request.div)
;;;363                {
;;;364                    err_code = sd_ble_gap_sec_info_reply(m_conn_handle, p_enc_info, NULL);
;;;365                    APP_ERROR_CHECK(err_code);
;;;366                }
;;;367                else
;;;368                {
;;;369                    // No keys found for this device
;;;370                    err_code = sd_ble_gap_sec_info_reply(m_conn_handle, NULL, NULL);
;;;371                    APP_ERROR_CHECK(err_code);
;;;372                }
;;;373                break;
;;;374    
;;;375            case BLE_GAP_EVT_TIMEOUT:
;;;376                if (p_ble_evt->evt.gap_evt.params.timeout.src == BLE_GAP_TIMEOUT_SRC_ADVERTISEMENT)
;;;377                { 
;;;378                 nrf_gpio_pin_clear(ADVERTISING_LED_PIN_NO);
;;;379    
;;;380                    // Configure buttons with sense level low as wakeup source.
;;;381                 //nrf_gpio_cfg_sense_input(WAKEUP_BUTTON_PIN,
;;;382                 //                             BUTTON_PULL,
;;;383                 //                             NRF_GPIO_PIN_SENSE_LOW);
;;;384                    
;;;385                    // Go to system-off mode (this function will not return; wakeup will cause a reset)
;;;386                 //     err_code = sd_power_system_off();    
;;;387                 //   APP_ERROR_CHECK(err_code);
;;;388                  #if OLED096_Func 
;;;389    					    OLED_ShowString(0,16, (uint8_t*)"BT:Tout");
;;;390    	            OLED_Refresh_Gram();
;;;391    					    #endif		
;;;392    							
;;;393    						 advertising_start();
;;;394                }
;;;395                break;
;;;396    
;;;397            default:
;;;398                // No implementation needed.
;;;399                break;
;;;400        }
;;;401    }
000302  bd70              POP      {r4-r6,pc}
                  |L1.772|
000304  2013              MOVS     r0,#0x13              ;323
000306  f7fffffe          BL       nrf_gpio_pin_set
00030a  2012              MOVS     r0,#0x12              ;324
00030c  f7fffffe          BL       nrf_gpio_pin_clear
000310  88a0              LDRH     r0,[r4,#4]            ;325
000312  8068              STRH     r0,[r5,#2]            ;325
000314  a24b              ADR      r2,|L1.1092|
000316  e008              B        |L1.810|
                  |L1.792|
000318  2013              MOVS     r0,#0x13              ;333
00031a  f7fffffe          BL       nrf_gpio_pin_clear
00031e  2000              MOVS     r0,#0                 ;334
000320  43c0              MVNS     r0,r0                 ;334
000322  8068              STRH     r0,[r5,#2]            ;334
000324  f7fffffe          BL       advertising_start
000328  a248              ADR      r2,|L1.1100|
                  |L1.810|
00032a  2110              MOVS     r1,#0x10              ;338
00032c  2000              MOVS     r0,#0                 ;338
00032e  f7fffffe          BL       OLED_ShowString
000332  f7fffffe          BL       OLED_Refresh_Gram
000336  bd70              POP      {r4-r6,pc}
                  |L1.824|
000338  2232              MOVS     r2,#0x32              ;357
00033a  1da1              ADDS     r1,r4,#6              ;357
00033c  4845              LDR      r0,|L1.1108|
00033e  f7fffffe          BL       __aeabi_memcpy
                  |L1.834|
000342  bd70              POP      {r4-r6,pc}
                  |L1.836|
000344  4943              LDR      r1,|L1.1108|
000346  89e2              LDRH     r2,[r4,#0xe]          ;362
000348  88c8              LDRH     r0,[r1,#6]            ;362
00034a  1d89              ADDS     r1,r1,#6              ;362
00034c  4290              CMP      r0,r2                 ;362
00034e  d108              BNE      |L1.866|
000350  2200              MOVS     r2,#0                 ;364
000352  8868              LDRH     r0,[r5,#2]            ;364  ; m_conn_handle
000354  df81              SVC      #0x81                 ;364
000356  2800              CMP      r0,#0                 ;365
000358  d0f3              BEQ      |L1.834|
00035a  21ff              MOVS     r1,#0xff              ;365
00035c  a233              ADR      r2,|L1.1068|
00035e  316e              ADDS     r1,r1,#0x6e           ;365
000360  e7cd              B        |L1.766|
                  |L1.866|
000362  2200              MOVS     r2,#0                 ;370
000364  4611              MOV      r1,r2                 ;370
000366  8868              LDRH     r0,[r5,#2]            ;370  ; m_conn_handle
000368  df81              SVC      #0x81                 ;370
00036a  2800              CMP      r0,#0                 ;371
00036c  d0e9              BEQ      |L1.834|
00036e  21ff              MOVS     r1,#0xff              ;371
000370  a22e              ADR      r2,|L1.1068|
000372  3174              ADDS     r1,r1,#0x74           ;371
000374  e7c3              B        |L1.766|
                  |L1.886|
000376  79a0              LDRB     r0,[r4,#6]            ;376
000378  2800              CMP      r0,#0                 ;376
00037a  d1e2              BNE      |L1.834|
00037c  2012              MOVS     r0,#0x12              ;378
00037e  f7fffffe          BL       nrf_gpio_pin_clear
000382  a235              ADR      r2,|L1.1112|
000384  2110              MOVS     r1,#0x10              ;389
000386  2000              MOVS     r0,#0                 ;389
000388  f7fffffe          BL       OLED_ShowString
00038c  f7fffffe          BL       OLED_Refresh_Gram
000390  f7fffffe          BL       advertising_start
000394  bd70              POP      {r4-r6,pc}
;;;402    
                          ENDP

                  ble_evt_dispatch PROC
;;;411     */
;;;412    static void ble_evt_dispatch(ble_evt_t * p_ble_evt)
000396  b510              PUSH     {r4,lr}
;;;413    {
000398  4604              MOV      r4,r0
;;;414        ble_conn_params_on_ble_evt(p_ble_evt);
00039a  f7fffffe          BL       ble_conn_params_on_ble_evt
;;;415        ble_nus_on_ble_evt(&m_nus, p_ble_evt);
00039e  482d              LDR      r0,|L1.1108|
0003a0  4621              MOV      r1,r4
0003a2  3084              ADDS     r0,r0,#0x84
0003a4  f7fffffe          BL       ble_nus_on_ble_evt
;;;416        on_ble_evt(p_ble_evt);
0003a8  4620              MOV      r0,r4
0003aa  f7fffffe          BL       on_ble_evt
;;;417    }
0003ae  bd10              POP      {r4,pc}
;;;418    
                          ENDP

                  power_manage PROC
;;;439     */
;;;440    void power_manage(void)
0003b0  b510              PUSH     {r4,lr}
;;;441    {
;;;442        uint32_t err_code = sd_app_evt_wait();
0003b2  df3d              SVC      #0x3d
;;;443        APP_ERROR_CHECK(err_code);
0003b4  2800              CMP      r0,#0
0003b6  d004              BEQ      |L1.962|
0003b8  21ff              MOVS     r1,#0xff
0003ba  a21c              ADR      r2,|L1.1068|
0003bc  31bc              ADDS     r1,r1,#0xbc
0003be  f7fffffe          BL       app_error_handler
                  |L1.962|
;;;444    }
0003c2  bd10              POP      {r4,pc}
;;;445    
                          ENDP

                  BLE_UART_Init PROC
;;;448    
;;;449    void BLE_UART_Init(void)
0003c4  b510              PUSH     {r4,lr}
0003c6  4926              LDR      r1,|L1.1120|
;;;450    {
0003c8  b088              SUB      sp,sp,#0x20
0003ca  2001              MOVS     r0,#1
0003cc  6008              STR      r0,[r1,#0]
0003ce  1d09              ADDS     r1,r1,#4
0003d0  6008              STR      r0,[r1,#0]
0003d2  4923              LDR      r1,|L1.1120|
0003d4  3110              ADDS     r1,r1,#0x10
0003d6  6008              STR      r0,[r1,#0]
0003d8  4921              LDR      r1,|L1.1120|
0003da  3108              ADDS     r1,r1,#8
0003dc  6008              STR      r0,[r1,#0]
0003de  2016              MOVS     r0,#0x16
0003e0  f7fffffe          BL       nrf_gpio_pin_clear
0003e4  2014              MOVS     r0,#0x14
0003e6  f7fffffe          BL       nrf_gpio_pin_clear
0003ea  2400              MOVS     r4,#0
0003ec  4b1d              LDR      r3,|L1.1124|
0003ee  2205              MOVS     r2,#5
0003f0  2102              MOVS     r1,#2
0003f2  4620              MOV      r0,r4
0003f4  9400              STR      r4,[sp,#0]
0003f6  f7fffffe          BL       app_timer_init
0003fa  2800              CMP      r0,#0
0003fc  d003              BEQ      |L1.1030|
0003fe  a21a              ADR      r2,|L1.1128|
000400  2154              MOVS     r1,#0x54
000402  f7fffffe          BL       app_error_handler
                  |L1.1030|
000406  e03b              B        |L1.1152|
                  |L1.1032|
                          DCD      ||.data||+0x4
                  |L1.1036|
                          DCD      RTC_Con
                  |L1.1040|
                          DCD      0xffffeb30
                  |L1.1044|
                          DCD      OLED_Contrast
                  |L1.1048|
000418  424c4520          DCB      "BLE Rx Length: %d",0
00041c  5278204c
000420  656e6774
000424  683a2025
000428  6400    
00042a  00                DCB      0
00042b  00                DCB      0
                  |L1.1068|
00042c  2e2e5c75          DCB      "..\\user\\ble_apps_uart.c",0
000430  7365725c
000434  626c655f
000438  61707073
00043c  5f756172
000440  742e6300
                  |L1.1092|
000444  42543a43          DCB      "BT:CON",0
000448  4f4e00  
00044b  00                DCB      0
                  |L1.1100|
00044c  42543a44          DCB      "BT:DIS",0
000450  495300  
000453  00                DCB      0
                  |L1.1108|
                          DCD      ||.bss||+0x218
                  |L1.1112|
000458  42543a54          DCB      "BT:Tout",0
00045c  6f757400
                  |L1.1120|
                          DCD      0x50000748
                  |L1.1124|
                          DCD      ||.bss||
                  |L1.1128|
000468  2e2e5c75          DCB      "..\\user\\ble_apps_uart.c",0
00046c  7365725c
000470  626c655f
000474  61707073
000478  5f756172
00047c  742e6300
                  |L1.1152|
000480  4a60              LDR      r2,|L1.1540|
000482  2101              MOVS     r1,#1
000484  4860              LDR      r0,|L1.1544|
000486  f7fffffe          BL       app_timer_create
00048a  2800              CMP      r0,#0
00048c  d003              BEQ      |L1.1174|
00048e  4a5f              LDR      r2,|L1.1548|
000490  2158              MOVS     r1,#0x58
000492  f7fffffe          BL       app_error_handler
                  |L1.1174|
000496  2300              MOVS     r3,#0
000498  2250              MOVS     r2,#0x50
00049a  495d              LDR      r1,|L1.1552|
00049c  4618              MOV      r0,r3
00049e  f7fffffe          BL       softdevice_handler_init
0004a2  2800              CMP      r0,#0
0004a4  d004              BEQ      |L1.1200|
0004a6  21ff              MOVS     r1,#0xff
0004a8  4a58              LDR      r2,|L1.1548|
0004aa  31ad              ADDS     r1,r1,#0xad
0004ac  f7fffffe          BL       app_error_handler
                  |L1.1200|
0004b0  4858              LDR      r0,|L1.1556|
0004b2  f7fffffe          BL       softdevice_ble_evt_handler_set
0004b6  2800              CMP      r0,#0
0004b8  d004              BEQ      |L1.1220|
0004ba  21ff              MOVS     r1,#0xff
0004bc  4a53              LDR      r2,|L1.1548|
0004be  31b1              ADDS     r1,r1,#0xb1
0004c0  f7fffffe          BL       app_error_handler
                  |L1.1220|
;;;451       leds_init();              //Ö¸Ê¾µÆ¼ÌµçÆ÷³õÊ¼»¯  
;;;452    	  timers_init();            //Èí¼þ¶¨Ê±Æ÷³õÊ¼»¯
;;;453        //uart_init();              //´®¿Ú³õÊ¼»¯
;;;454    	 // nrf_delay_us(100000);
;;;455    	
;;;456         //À¶ÑÀ³õÊ¼»¯
;;;457        ble_stack_init();    // Install BLE event Handler function list
;;;458        gap_params_init();    // set gap parameter
0004c4  f7fffffe          BL       gap_params_init
0004c8  4853              LDR      r0,|L1.1560|
0004ca  9000              STR      r0,[sp,#0]
0004cc  4850              LDR      r0,|L1.1552|
0004ce  4669              MOV      r1,sp
0004d0  3050              ADDS     r0,r0,#0x50
0004d2  f7fffffe          BL       ble_nus_init
0004d6  2800              CMP      r0,#0
0004d8  d003              BEQ      |L1.1250|
0004da  4a4c              LDR      r2,|L1.1548|
0004dc  21d3              MOVS     r1,#0xd3
0004de  f7fffffe          BL       app_error_handler
                  |L1.1250|
;;;459        services_init();       //set advertising mode, set UUID service
;;;460        advertising_init();    // add UUID service , and service function handler
0004e2  f7fffffe          BL       advertising_init
0004e6  211c              MOVS     r1,#0x1c
0004e8  4668              MOV      r0,sp
0004ea  f7fffffe          BL       __aeabi_memclr4
0004ee  2005              MOVS     r0,#5
0004f0  0440              LSLS     r0,r0,#17
0004f2  9001              STR      r0,[sp,#4]
0004f4  1080              ASRS     r0,r0,#2
0004f6  9002              STR      r0,[sp,#8]
0004f8  9400              STR      r4,[sp,#0]
0004fa  2103              MOVS     r1,#3
0004fc  4668              MOV      r0,sp
0004fe  7301              STRB     r1,[r0,#0xc]
000500  81c4              STRH     r4,[r0,#0xe]
000502  7404              STRB     r4,[r0,#0x10]
000504  4845              LDR      r0,|L1.1564|
000506  9005              STR      r0,[sp,#0x14]
000508  4845              LDR      r0,|L1.1568|
00050a  9006              STR      r0,[sp,#0x18]
00050c  4668              MOV      r0,sp
00050e  f7fffffe          BL       ble_conn_params_init
000512  2800              CMP      r0,#0
000514  d004              BEQ      |L1.1312|
000516  21ff              MOVS     r1,#0xff
000518  4a3c              LDR      r2,|L1.1548|
00051a  311a              ADDS     r1,r1,#0x1a
00051c  f7fffffe          BL       app_error_handler
                  |L1.1312|
;;;461        conn_params_init();   // set the connection parameter
;;;462        sec_params_init();    // set the security connect parameter
000520  f7fffffe          BL       sec_params_init
;;;463       
;;;464        advertising_start();      //¿ªÊ¼¹ã²¥
000524  f7fffffe          BL       advertising_start
;;;465    
;;;466    }
000528  b008              ADD      sp,sp,#0x20
00052a  bd10              POP      {r4,pc}
;;;467    
                          ENDP

                  nrf_gpio_pin_set PROC
;;;216     */
;;;217    static __INLINE void nrf_gpio_pin_set(uint32_t pin_number)
00052c  2101              MOVS     r1,#1
;;;218    {
;;;219        NRF_GPIO->OUTSET = (1UL << pin_number);
00052e  4081              LSLS     r1,r1,r0
000530  483c              LDR      r0,|L1.1572|
000532  6081              STR      r1,[r0,#8]
;;;220    }
000534  4770              BX       lr
;;;221    
                          ENDP

                  nrf_gpio_pin_clear PROC
;;;230     */
;;;231    static __INLINE void nrf_gpio_pin_clear(uint32_t pin_number)
000536  2101              MOVS     r1,#1
;;;232    {
;;;233        NRF_GPIO->OUTCLR = (1UL << pin_number);
000538  4081              LSLS     r1,r1,r0
00053a  483a              LDR      r0,|L1.1572|
00053c  60c1              STR      r1,[r0,#0xc]
;;;234    }
00053e  4770              BX       lr
;;;235    
                          ENDP

                  gap_params_init PROC
;;;97      */
;;;98     static void gap_params_init(void)
000540  b50e              PUSH     {r1-r3,lr}
;;;99     {
;;;100        uint32_t                err_code;
;;;101        ble_gap_conn_params_t   gap_conn_params;
;;;102        ble_gap_conn_sec_mode_t sec_mode;
;;;103    
;;;104        BLE_GAP_CONN_SEC_MODE_SET_OPEN(&sec_mode);
000542  2011              MOVS     r0,#0x11
000544  4669              MOV      r1,sp
000546  7208              STRB     r0,[r1,#8]
;;;105        
;;;106        err_code = sd_ble_gap_device_name_set(&sec_mode,
000548  220a              MOVS     r2,#0xa
00054a  a137              ADR      r1,|L1.1576|
00054c  a802              ADD      r0,sp,#8
00054e  df7c              SVC      #0x7c
;;;107                                              (const uint8_t *) DEVICE_NAME,
;;;108                                              strlen(DEVICE_NAME));
;;;109        APP_ERROR_CHECK(err_code);
000550  2800              CMP      r0,#0
000552  d003              BEQ      |L1.1372|
000554  4a2d              LDR      r2,|L1.1548|
000556  216d              MOVS     r1,#0x6d
000558  f7fffffe          BL       app_error_handler
                  |L1.1372|
;;;110    
;;;111        memset(&gap_conn_params, 0, sizeof(gap_conn_params));
00055c  2000              MOVS     r0,#0
00055e  9000              STR      r0,[sp,#0]
;;;112    
;;;113        gap_conn_params.min_conn_interval = MIN_CONN_INTERVAL;
000560  2210              MOVS     r2,#0x10
000562  4669              MOV      r1,sp
000564  9001              STR      r0,[sp,#4]
000566  800a              STRH     r2,[r1,#0]
;;;114        gap_conn_params.max_conn_interval = MAX_CONN_INTERVAL;
000568  223c              MOVS     r2,#0x3c
00056a  804a              STRH     r2,[r1,#2]
;;;115        gap_conn_params.slave_latency     = SLAVE_LATENCY;
00056c  8088              STRH     r0,[r1,#4]
;;;116        gap_conn_params.conn_sup_timeout  = CONN_SUP_TIMEOUT;
00056e  20ff              MOVS     r0,#0xff
000570  3091              ADDS     r0,r0,#0x91
000572  80c8              STRH     r0,[r1,#6]
;;;117    
;;;118        err_code = sd_ble_gap_ppcp_set(&gap_conn_params);
000574  4668              MOV      r0,sp
000576  df7a              SVC      #0x7a
;;;119        APP_ERROR_CHECK(err_code);
000578  2800              CMP      r0,#0
00057a  d003              BEQ      |L1.1412|
00057c  4a23              LDR      r2,|L1.1548|
00057e  2177              MOVS     r1,#0x77
000580  f7fffffe          BL       app_error_handler
                  |L1.1412|
;;;120    }
000584  bd0e              POP      {r1-r3,pc}
;;;121    
                          ENDP

                  advertising_init PROC
;;;127     */
;;;128    static void advertising_init(void)
000586  b510              PUSH     {r4,lr}
;;;129    {
000588  b09e              SUB      sp,sp,#0x78
;;;130        uint32_t      err_code;
;;;131        ble_advdata_t advdata;
;;;132        ble_advdata_t scanrsp;
;;;133        uint8_t       flags = BLE_GAP_ADV_FLAGS_LE_ONLY_LIMITED_DISC_MODE;
00058a  2105              MOVS     r1,#5
00058c  a818              ADD      r0,sp,#0x60
00058e  7501              STRB     r1,[r0,#0x14]
;;;134        
;;;135        ble_uuid_t adv_uuids[] = {{BLE_UUID_NUS_SERVICE, m_nus.uuid_type}};
000590  4828              LDR      r0,|L1.1588|
000592  6800              LDR      r0,[r0,#0]  ; <Data1>
000594  901c              STR      r0,[sp,#0x70]
000596  481e              LDR      r0,|L1.1552|
000598  3050              ADDS     r0,r0,#0x50
00059a  7801              LDRB     r1,[r0,#0]  ; m_nus
00059c  a818              ADD      r0,sp,#0x60
00059e  7481              STRB     r1,[r0,#0x12]
;;;136    
;;;137        memset(&advdata, 0, sizeof(advdata));
0005a0  2138              MOVS     r1,#0x38
0005a2  4668              MOV      r0,sp
0005a4  f7fffffe          BL       __aeabi_memclr4
;;;138        advdata.name_type               = BLE_ADVDATA_FULL_NAME;
0005a8  2102              MOVS     r1,#2
0005aa  4668              MOV      r0,sp
0005ac  7001              STRB     r1,[r0,#0]
;;;139        advdata.include_appearance      = false;
0005ae  2100              MOVS     r1,#0
0005b0  7081              STRB     r1,[r0,#2]
;;;140        advdata.flags.size              = sizeof(flags);
0005b2  2401              MOVS     r4,#1
0005b4  8084              STRH     r4,[r0,#4]
;;;141        advdata.flags.p_data            = &flags;
0005b6  a81d              ADD      r0,sp,#0x74
;;;142    
;;;143        memset(&scanrsp, 0, sizeof(scanrsp));
0005b8  9002              STR      r0,[sp,#8]
0005ba  2138              MOVS     r1,#0x38
0005bc  a80e              ADD      r0,sp,#0x38
0005be  f7fffffe          BL       __aeabi_memclr4
;;;144        scanrsp.uuids_complete.uuid_cnt = sizeof(adv_uuids) / sizeof(adv_uuids[0]);
0005c2  a810              ADD      r0,sp,#0x40
0005c4  8204              STRH     r4,[r0,#0x10]
;;;145        scanrsp.uuids_complete.p_uuids  = adv_uuids;
0005c6  a81c              ADD      r0,sp,#0x70
;;;146        
;;;147        err_code = ble_advdata_set(&advdata, &scanrsp);
0005c8  9015              STR      r0,[sp,#0x54]
0005ca  a90e              ADD      r1,sp,#0x38
0005cc  4668              MOV      r0,sp
0005ce  f7fffffe          BL       ble_advdata_set
;;;148        APP_ERROR_CHECK(err_code);
0005d2  2800              CMP      r0,#0
0005d4  d003              BEQ      |L1.1502|
0005d6  4a0d              LDR      r2,|L1.1548|
0005d8  2194              MOVS     r1,#0x94
0005da  f7fffffe          BL       app_error_handler
                  |L1.1502|
;;;149    }
0005de  b01e              ADD      sp,sp,#0x78
0005e0  bd10              POP      {r4,pc}
;;;150    
                          ENDP

                  sec_params_init PROC
;;;216     */
;;;217    static void sec_params_init(void)
0005e2  4915              LDR      r1,|L1.1592|
;;;218    {
;;;219        m_sec_params.timeout      = SEC_PARAM_TIMEOUT;
0005e4  201e              MOVS     r0,#0x1e
0005e6  8008              STRH     r0,[r1,#0]
;;;220        m_sec_params.bond         = SEC_PARAM_BOND;
0005e8  7888              LDRB     r0,[r1,#2]  ; m_sec_params
0005ea  2201              MOVS     r2,#1
0005ec  4310              ORRS     r0,r0,r2
;;;221        m_sec_params.mitm         = SEC_PARAM_MITM;
0005ee  22e1              MOVS     r2,#0xe1
0005f0  4010              ANDS     r0,r0,r2
;;;222        m_sec_params.io_caps      = SEC_PARAM_IO_CAPABILITIES;
;;;223        m_sec_params.oob          = SEC_PARAM_OOB;  
0005f2  22df              MOVS     r2,#0xdf
0005f4  300c              ADDS     r0,r0,#0xc
0005f6  4010              ANDS     r0,r0,r2
0005f8  7088              STRB     r0,[r1,#2]
;;;224        m_sec_params.min_key_size = SEC_PARAM_MIN_KEY_SIZE;
0005fa  2007              MOVS     r0,#7
0005fc  70c8              STRB     r0,[r1,#3]
;;;225        m_sec_params.max_key_size = SEC_PARAM_MAX_KEY_SIZE;
0005fe  2010              MOVS     r0,#0x10
000600  7108              STRB     r0,[r1,#4]
;;;226    }
000602  4770              BX       lr
;;;227    
                          ENDP

                  |L1.1540|
                          DCD      rtc_timeout_handler
                  |L1.1544|
                          DCD      m_rtc_update_timer_id
                  |L1.1548|
                          DCD      ||.text||+0x468
                  |L1.1552|
                          DCD      ||.bss||+0x24c
                  |L1.1556|
                          DCD      ble_evt_dispatch
                  |L1.1560|
                          DCD      nus_data_handler
                  |L1.1564|
                          DCD      on_conn_params_evt
                  |L1.1568|
                          DCD      conn_params_error_handler
                  |L1.1572|
                          DCD      0x50000500
                  |L1.1576|
000628  424c455f          DCB      "BLE_Health",0
00062c  4865616c
000630  746800  
000633  00                DCB      0
                  |L1.1588|
                          DCD      ||.constdata||
                  |L1.1592|
                          DCD      ||.data||+0x8

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  APP_TIMER_BUF
                          %        536
                  m_auth_status
                          %        52
                  EVT_BUFFER
                          %        80
                  m_nus
                          %        28

                          AREA ||area_number.4||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.4||, ||.bss||
                  data_array
                          %        20

                          AREA ||.constdata||, DATA, READONLY, ALIGN=2

000000  0001              DCW      0x0001
000002  0000              DCB      0x00,0x00

                          AREA ||.data||, DATA, ALIGN=1

                  change_state
000000  0000              DCB      0x00,0x00
                  m_conn_handle
000002  ffff              DCW      0xffff
                  states
                          DCDU     0x00000000
                  m_sec_params
                          DCDU     0x00000000
00000c  0000              DCB      0x00,0x00

                          AREA ||area_number.8||, DATA, ALIGN=0

                          EXPORTAS ||area_number.8||, ||.data||
                  BT_TR_time_count
000000  00                DCB      0x00

                          AREA ||area_number.9||, DATA, ALIGN=0

                          EXPORTAS ||area_number.9||, ||.data||
                  index_i
000000  00                DCB      0x00

                          AREA ||area_number.10||, DATA, ALIGN=0

                          EXPORTAS ||area_number.10||, ||.data||
                  BLE_Rx_Flag
000000  00                DCB      0x00

;*** Start embedded assembler ***

#line 1 "..\\user\\ble_apps_uart.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___15_ble_apps_uart_c_e10b1b08____REV16|
#line 129 "C:\\Keil_v5\\ARM\\CMSIS\\Include\\core_cmInstr.h"
|__asm___15_ble_apps_uart_c_e10b1b08____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___15_ble_apps_uart_c_e10b1b08____REVSH|
#line 144
|__asm___15_ble_apps_uart_c_e10b1b08____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP
	AREA ||.emb_text||, CODE
	THUMB
	EXPORT |__asm___15_ble_apps_uart_c_e10b1b08__nrf_delay_us|
#line 8 "..\\Include\\nrf_delay.h"
|__asm___15_ble_apps_uart_c_e10b1b08__nrf_delay_us| PROC
#line 9

loop
 SUBS R0, R0, #1
 NOP
 NOP
 NOP
 NOP
 NOP
 NOP
 NOP
 NOP
 NOP
 NOP
 NOP
 NOP
 BNE loop
 BX LR
	ENDP

;*** End   embedded assembler ***
